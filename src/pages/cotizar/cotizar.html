<!--
  Generated template for the CotizarPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header >

  <ion-navbar color="primary">
      <ion-item color="primary">
          <ion-label>Posible Fecha</ion-label>
          <ion-datetime display-format="MM/YYYY" [(ngModel)]="fecha" (ngModelChange)="dateChanged()" picker-format="MMMM YYYY"></ion-datetime>
        </ion-item>

   
  </ion-navbar>

</ion-header>


<ion-content>


    <ion-searchbar (ionInput)="getItems($event)"  (click)="revisar()" color="primary" placeholder="Buscar articulo" animated></ion-searchbar>

    <div *ngIf="fechaBool != true; else siTiene" class="cardnopadaga">
        <ion-list [hidden]="vistaBoo">
            <ion-item *ngFor="let item of inventario" (click)="itemClick(item.id_mob,item.nombre_mob,item.cantidad_mob,item.costo_mob)">
                <ion-grid>
                    <ion-row>
                      <ion-col>
                          {{item.nombre_mob}}
                      </ion-col>
                      <ion-col>
                          {{item.cantidad_mob}} Piezas 
                      </ion-col>
                      <ion-col>
                          ${{item.costo_mob}} c/u
                      </ion-col>
                    </ion-row>
                </ion-grid>
            </ion-item>
          </ion-list>

          
    </div>
      <ng-template #siTiene  >


      <ion-list [hidden]="vistaBoo">
          <ion-item *ngFor="let movil of inventario" (click)="itemClick(movil.id_mob,movil.nombre_mob,movil.cantidad_mob,movil.costo_mob)">
              <ion-grid>
                  <ion-row>
                    <ion-col>
                       distinto {{movil.nombre_mob}}
                    </ion-col>
                    <ion-col>
                        {{movil.cantidad_mob}} Disponibles 
                    </ion-col>
                    <ion-col>
                        ${{movil.costo_mob}} c/u
                    </ion-col>
                  </ion-row>
              </ion-grid>
          </ion-item>
        </ion-list>

       

        </ng-template>

        <ion-list>
            <ion-item  *ngFor="let item of elementos" [ngClass]="{'classname': item.isChanged }">
                  <ion-label class="lableNomSelec">{{item.nombre_mob}}<br/> $<strong>{{item.costo_mob}}</strong> c/u  Total: $<strong>{{item.total}}</strong></ion-label>
                    <button ion-button (click)="addCantidad(item.id_mob, item.cantidad_mob, item.nombre_mob, item.costo_mob)" icon-only clear item-end>
                      <ion-icon name="add-circle" ></ion-icon>
                    </button>
                    <button ion-button (click)="selecExac(item.id_mob, item.costo_mob)" clear item-end outline>
                        {{item.cantidad_mob}}
                    </button>
                    <button ion-button (click)="restarCantidad(item.id_mob,item.cantidad_mob, item.costo_mob)" icon-only clear item-end>
                      <ion-icon name="remove-circle"></ion-icon>
                    </button>
                    <button ion-button (click)="eliminarItem(item.id_mob)" icon-only clear item-end>
                      <ion-icon name="trash"></ion-icon>
                    </button>
                   
              </ion-item>
      
        </ion-list>


        <ion-item>
            SubTotal
            <ion-badge item-end>${{suTotalProd}}</ion-badge>
          </ion-item>
          <ion-item>
              <ion-label>Agregar IVA</ion-label>
              <ion-toggle [(ngModel)]="isToggled" (ionChange)="notify()" checked="false"></ion-toggle>
            </ion-item>


      
        
</ion-content>

<ion-footer>
    <ion-toolbar>
      <p>Total $<strong>{{totalProd}}</strong></p>
      <ion-buttons end>
        <button ion-button (click)="crearEvento()" icon-end color="primary">
          Crear Evento
          <ion-icon name="skip-forward"></ion-icon>
        </button>
      </ion-buttons>
    </ion-toolbar>
  </ion-footer>
